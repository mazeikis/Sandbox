{% extends "AppBundle:Twig:layout.html.twig" %}
{% block style %}
{% spaceless %}
    {{parent()}}
    <link rel="stylesheet" href="{{ asset('css/4-col-portfolio.css') }}"/>
{% endspaceless %}
{% endblock %}
{% block content %}
 <!-- Page Content -->
    <div class="container">
        <!-- Page Heading -->
        <div class="row">
            <div class="col-xs-12">
                <h1 class="page-header">Image Gallery
                <small>8 Images at a time</small></h1>
            </div>
        </div>
            <div class="row">
                <div class="col-md-4" style="padding-top:5px">
                    <form method="get" action="{{path('_gallery')}}" class="form-inline" role="form">
                        <div class="input-group">
                            <label for="search" class="sr-only">Filter: </label>
                            <input type="search" name="q" id="search" required="required" class="form-control" placeholder="{{app.request.query.get('q', 'Search')}}">
                        <span class="input-group-btn">
                        <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button>
                        </span>
                        </div>
                    </form>
                </div>
                <div class="col-md-4" style="padding-top:5px">
                    <div class="btn-group btn-group-justified" role="group">
                    {{sortable('created', 'Date', app.request.query.get('q'))}}
                    {{sortable('title', 'Title', app.request.query.get('q'))}}
                    {{sortable('rating', 'Rating', app.request.query.get('q'))}}
                    </div>
                </div>
                <div class="col-md-4" style="padding-top:5px">
                    {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
                            <a class="btn btn-success btn-sm pull-xs-left pull-md-right pull-lg-right" href="{{path('_upload')}}">+ upload image</a>
                    {% else %}
                            <a type="button" role="button" class="btn btn-success btn-sm next disabled pull-xs-left pull-md-right pull-lg-right">+ upload image</a>
                    {% endif %}
                </div>
            </div><br>
    {% include 'BraincraftedBootstrapBundle::flash.html.twig' %}
        <!-- Gallery Grid -->
    <div class="row">
    {% for image in content %}
    <div class="col-md-3 portfolio-item">
        <div class="image-box">
          <a href='{{path('_image', { 'id' : image[0].id })}}'>
            <img src='{{ (image[0].fileName~'.'~image[0].extension) | imagine_filter('thumb')}}' class="img-responsive">
          </a>
        </div>
        <div class="rating-box text-center" style="color: #999999; padding: 8px 15px; font-size: 14px">
            {{image[0].title}} | {{image['votes_sum']|default('Not yet rated')}}
        </div>
    </div>
    {% else %}
    <div class="col-lg-12"><h3>No images were found, database is empty?</h3></div>
    {% endfor %}
    </div>
    <!-- End of Grid -->
<div class="row text-center">
  <div class="col-md-12">
    <div class="pagerfanta">
        {{ pagerfanta(pager, 'twitter_bootstrap3') }}
    </div>
  </div>
</div>
</div>
{% endblock %}
