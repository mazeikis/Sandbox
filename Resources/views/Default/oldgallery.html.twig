{% extends "SandboxBundle:Default:index.html.twig" %}
{% block content %}
<div style='padding-top : 10px' class="container-fluid">
<div class="row">
	<div class="col-lg-12">
		<h1 class="page-header">gallery
		<br><small>8 pictures at a time</small></h1>
		<div class="col-sm-3 col-md-3 pull-left">
	        {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
			    <a class="btn btn-primary btn-small" href="{{path('_upload')}}">upload</a>
			{% else %}
			    <button class="btn btn-disabled btn-small" href="">upload</a>
	        {% endif %}
	        <a href="{{path('_gallery', { 'page' : page, 'sortBy': 'userId', 'order': 'ASC'})}}" class="btn btn-success btn-small" >orderASC</a>
    	</div>
    </div>
</div>
	{% if app.session.flashBag.has('success') %}
    	<div class="alert alert-success">
            {% for msg in app.session.flashBag.get('success') %}
                    	<strong>{{ msg }}</strong>
            {% endfor %}
        </div>
    {% endif %}
	{% if pageList is defined %}
		<div class="row text-center">
	        <div class="col-lg-12">
				<ul class="pagination">
					<li><a href='{{ path('_gallery', { 'page': 1, 'sortBy' : sortBy|default('created'), 'order' : order|default('DESC')}) }}'>«</a></li>
					{% for x in pageList %}
						<li {% if x == page %}class="active"{% endif %}>
							<a href='{{ path('_gallery', { 'page': x, 'sortBy' : sortBy|default('created'), 'order' : order|default('DESC')}) }}'>{{ x }}</a>
						</li>
					{% endfor %}
					<li><a href='{{ path('_gallery', { 'page': lastPage, 'sortBy' : sortBy|default('created'), 'order' : order|default('DESC')}) }}'>»</a></li>
				</ul>
			</div>
		</div>
	{% endif %}
	{% if content is defined %}
		{% for item in content %}
			<div class="col-lg-3 col-md-4 col-xs-6 thumb">
	            <a href='{{path('_image', { 'id' : item.getId })}}'>
	         		<img src='{{ (item.getFileName~'.'~item.getExtension) | imagine_filter('my_thumb')}}' class="img-thumbnail">
				</a>
			</div>
		{% endfor %}
	{% endif %}
	<hr>
	{% if pageList is defined %}
		<div class="row text-center">
	        <div class="col-lg-12">
				<ul class="pagination">
					<li><a href='{{ path('_gallery', { 'page': 1, 'sortBy' : sortBy|default('created'), 'order' : order|default('DESC')}) }}'>«</a></li>
					{% for x in pageList %}
						<li {% if x == page %}class="active"{% endif %}>
							<a href='{{ path('_gallery', { 'page': x, 'sortBy' : sortBy|default('created'), 'order' : order|default('DESC')}) }}'>{{ x }}</a>
						</li>
					{% endfor %}
					<li><a href='{{ path('_gallery', { 'page': lastPage, 'sortBy' : sortBy|default('created'), 'order' : order|default('DESC')}) }}'>»</a></li>
				</ul>
			</div>
		</div>
	{% endif %}
{% endblock %}